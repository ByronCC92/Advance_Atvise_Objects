<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<svg height="890" version="1.2" width="1675" xmlns="http://www.w3.org/2000/svg" xmlns:atv="http://webmi.atvise.com/2007/svgext" xmlns:xlink="http://www.w3.org/1999/xlink">
 <defs/>
 <metadata>
  <atv:parameter behavior="optional" defaultvalue="SYSTEM.GLOBALS.Color_Global_1" desc="Color" name="Color" substitute="$Color$" valuetype="global"/>
  <atv:parameter behavior="optional" defaultvalue="AGENT.OBJECTS.Global_Maintenance" desc="Global Maintenance Node" name="Global_Maintenance" valuetype="address"/>
  <atv:parameter behavior="optional" defaultvalue="AGENT.OBJECTS" desc="Global Maintenance Base Folder" name="Global_Maintenance_Base_Folder" valuetype="address"/>
  <atv:gridconfig enabled="true" gridstyle="lines" height="20" width="20"/>
  <atv:snapconfig enabled="true" height="10" width="10"/>
 </metadata>
 <line atv:refpx="825" atv:refpy="70" id="id_3" stroke="$Color$" stroke-width="2" x1="0" x2="1650" y1="70" y2="70"/>
 <text atv:refpx="185" atv:refpy="34" fill="#000000" font-family="Arial" font-size="34" id="id_4" x="5" y="46.5">Maintenance Dashboard</text>
 <svg atv:refpx="840" atv:refpy="490.002" height="600" id="id_5" transform="matrix(2.1,0,0,1.3333,0,0)" width="800" x="0" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Advanced.hmi.iframe" y="67.502">
  <atv:argument name="frameName" value="mainmaintframe"/>
  <atv:argument name="display" value="SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.atvise_Advanced_Objects_Dashboards.Maintenance_Dashboard.Maintenance_blank"/>
 </svg>
 <rect atv:refpx="1520" atv:refpy="35" fill="#000000" height="40" id="background_history" stroke="none" stroke-width="2" width="40" x="1500" y="16"/>
 <svg atv:refpx="1520" atv:refpy="35" height="20" id="id_21" transform="matrix(2,0,0,2,0,0)" width="20" x="750" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.history" y="8">
  <atv:argument name="symbolColor" value="#ffffff"/>
 </svg>
 <rect atv:refpx="1520" atv:refpy="35" fill="#000000" fill-opacity="0" height="40" id="click_area_history" stroke="none" stroke-width="2" width="40" x="1500" y="16"/>
 <rect atv:refpx="1420" atv:refpy="40" fill="#000000" height="40" id="background_set" stroke="none" stroke-width="2" width="40" x="1400" y="15"/>
 <g atv:refpx="1419.827" atv:refpy="40.319" id="id_28" transform="matrix(1,0,0,1,1060,7)">
  <polyline atv:refpx="352.435" atv:refpy="19.81" fill="#ffffff" id="id_23" points="344.242,14.36 348.325,18.444 350.878,18.444 351.899,17.423 351.899,15.381 347.815,11.297 352.41,11.297 354.961,14.36 354.961,18.444 361.088,24.569 357.478,28.32 351.899,22.528 347.815,22.018 344.242,18.954 343.78,14.148" stroke="#ffffff" stroke-width="1"/>
  <polyline atv:refpx="351.463" atv:refpy="18.612" fill="#ffffff" id="id_24" points="376.961,41.081 372.878,36.998 370.325,36.998 369.304,38.019 369.304,40.06 373.388,44.145 368.793,44.145 366.242,41.081 366.242,36.998 360.116,30.872 363.725,27.122 369.304,32.914 373.388,33.424 376.961,36.487 377.424,41.294" stroke="#ffffff" stroke-width="1"/>
  <path atv:refpx="358.821" atv:refpy="28.853" d="M354.5,30.696L367.773,17.423C367.773,17.423 367.773,15.381 367.773,15.381C367.773,15.381 373.899,12.318 373.899,12.318C373.899,12.318 375.431,13.85 375.431,13.85C375.431,13.85 372.878,19.465 372.878,19.465C372.878,19.465 370.836,19.465 370.836,19.465C370.836,19.465 356.542,33.248 356.542,33.248C356.542,33.248 358.074,34.78 358.074,34.78C358.074,34.78 348.374,44.479 348.374,44.479C348.374,44.479 345.311,46.521 343.27,44.479C341.228,42.437 342.759,40.396 342.759,39.885C342.759,39.375 353.021,29.16 353.021,29.16C353.021,29.16 354.5,31.207 354.5,30.696" fill="#ffffff" id="id_25" stroke="#ffffff" stroke-width="1"/>
 </g>
 <rect atv:refpx="1420" atv:refpy="40" fill="#000000" fill-opacity="0" height="40" id="click_area_set" stroke="none" stroke-width="2" width="40" x="1400" y="15"/>
 <rect atv:refpx="1470" atv:refpy="35" fill="#000000" height="40" id="background_chart" stroke="none" stroke-width="2" width="40" x="1450" y="16"/>
 <svg atv:refpx="1470" atv:refpy="35" height="20" id="id_36" transform="matrix(1.75,0,0,1.75,0,0)" width="20" x="830.001" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.chart" y="10.571">
  <atv:argument name="symbolColor" value="#ffffff"/>
 </svg>
 <rect atv:refpx="1470" atv:refpy="35" fill="#000000" fill-opacity="0" height="40" id="click_area_chart" stroke="none" stroke-width="2" width="40" x="1450" y="16"/>
 <rect atv:refpx="1618" atv:refpy="36" fill="#000000" height="40" id="background_calendar" stroke="none" stroke-width="2" visibility="hidden" width="40" x="1598" y="17"/>
 <svg atv:refpx="1618" atv:refpy="36" height="20" id="id_6" transform="matrix(1.9,0,0,1.9,0,0)" visibility="hidden" width="20" x="841.579" xlink:href="SYSTEM.LIBRARY.ATVISE.OBJECTDISPLAYS.Symbols.20x20.calendar" y="9.474">
  <atv:argument name="symbolColor" value="#ffffff"/>
  <atv:argument name="numberColor" value="#000000"/>
 </svg>
 <rect atv:refpx="1570" atv:refpy="35" fill="#000000" height="40" id="background_pdf" stroke="none" stroke-width="2" visibility="hidden" width="40" x="1550" y="16"/>
 <rect atv:refpx="1618" atv:refpy="46" fill="#000000" fill-opacity="0" height="40" id="click_area_calendar" stroke="none" stroke-width="2" visibility="hidden" width="40" x="1598" y="17"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_15" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_16" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_17" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_18" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_8" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_9" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_10" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_19" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_20" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_22" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_14" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_26" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_29" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_30" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="nan" atv:refpy="nan" id="id_31" transform="matrix(0.0738,0,0,0.069,1549.5929,17.1535)" visibility="hidden"/>
 <g atv:refpx="1570" atv:refpy="30.003" id="id_0" transform="matrix(1,0,0,1,-50,1)" visibility="hidden">
  <path atv:refpx="276.514" atv:refpy="273.176" d="M1635.72,29.594L1634.74,29.594L1634.74,25.19C1634.74,25.163 1634.74,25.135 1634.74,25.107C1634.73,24.933 1634.67,24.761 1634.55,24.625L1626.71,16.254C1626.71,16.251 1626.7,16.251 1626.7,16.248C1626.66,16.2 1626.6,16.16 1626.54,16.125C1626.53,16.114 1626.51,16.105 1626.49,16.096C1626.44,16.07 1626.39,16.049 1626.34,16.033C1626.32,16.03 1626.31,16.024 1626.29,16.021C1626.23,16.008 1626.17,15.999 1626.11,15.999L1606.85,15.999C1605.97,15.999 1605.25,16.668 1605.25,17.49L1605.25,29.593L1604.28,29.593C1603.02,29.593 1602,30.547 1602,31.724L1602,42.801C1602,43.977 1603.02,44.931 1604.28,44.931L1605.25,44.931L1605.25,52.514C1605.25,53.336 1605.97,54.005 1606.85,54.005L1633.15,54.005C1634.03,54.005 1634.74,53.336 1634.74,52.514L1634.74,44.931L1635.72,44.931C1636.98,44.931 1638,43.977 1638,42.801L1638,31.724C1638,30.547 1636.98,29.594 1635.72,29.594M1606.85,17.49L1625.31,17.49L1625.31,25.116C1625.31,25.527 1625.67,25.861 1626.11,25.861L1633.15,25.861L1633.15,29.594L1606.85,29.594ZM1626.42,37.322C1626.42,39.452 1625.59,40.921 1624.44,41.83C1623.18,42.804 1621.28,43.266 1618.95,43.266C1617.55,43.266 1616.56,43.184 1615.89,43.101L1615.89,32.171C1616.88,32.022 1618.17,31.94 1619.53,31.94C1621.79,31.94 1623.26,32.32 1624.4,33.128C1625.64,33.987 1626.42,35.357 1626.42,37.322M1605.63,43.151L1605.63,32.171C1606.46,32.039 1607.63,31.94 1609.27,31.94C1610.93,31.94 1612.11,32.237 1612.91,32.832C1613.66,33.393 1614.18,34.318 1614.18,35.407C1614.18,36.497 1613.79,37.422 1613.08,38.049C1612.16,38.858 1610.8,39.222 1609.21,39.222C1608.86,39.222 1608.54,39.205 1608.3,39.172L1608.3,43.151ZM1633.15,52.111L1606.85,52.111L1606.85,44.931L1633.15,44.931ZM1635.46,34.086L1630.88,34.086L1630.88,36.629L1635.16,36.629L1635.16,38.676L1630.88,38.676L1630.88,43.151L1628.18,43.151L1628.18,32.022L1635.46,32.022Z" fill="#ffffff" id="id_2" stroke-width="0.071"/>
  <path atv:refpx="139.773" atv:refpy="283.004" d="M1611.51,35.589C1611.51,34.566 1610.75,33.955 1609.41,33.955C1608.87,33.955 1608.49,34.004 1608.3,34.054L1608.3,37.34C1608.53,37.389 1608.81,37.406 1609.2,37.406C1610.63,37.406 1611.51,36.729 1611.51,35.589" fill="#ffffff" id="id_33" stroke-width="0.071"/>
  <path atv:refpx="291.092" atv:refpy="312.864" d="M1619.81,34.025C1619.21,34.025 1618.82,34.075 1618.59,34.124L1618.59,41.405C1618.82,41.456 1619.19,41.456 1619.53,41.456C1621.97,41.472 1623.56,40.217 1623.56,37.559C1623.57,35.247 1622.13,34.025 1619.81,34.025" fill="#ffffff" id="id_35" stroke-width="0.071"/>
 </g>
 <rect atv:refpx="1570" atv:refpy="35" fill="#000000" fill-opacity="0" height="40" id="click_area_pdf" stroke="none" stroke-width="2" visibility="hidden" width="40" x="1550" y="16"/>
 <text atv:refpx="672.631" atv:refpy="31" fill="#000000" font-family="Arial" font-size="20" id="id_7" x="604.5" y="43.5">Machine:</text>
 <svg atv:refpx="885.001" atv:refpy="39.999" height="30" id="id_12" transform="matrix(2.4375,0,0,1.3333,0,0)" width="160" x="283.077" xlink:href="SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.atvise_Advanced_Objects_Complementary_Elements.Combobox_Complementary_Element" y="15">
  <atv:argument name="name" value="Maintenance_Element"/>
  <atv:argument name="mode" value="Enum List"/>
  <atv:argument name="fontSize" value="20"/>
  <atv:argument name="itemsCount" value="10"/>
  <atv:overwrite height="36" id="focus_frame" transform="matrix(0.4103,0,0,0.75,0,0)" width="386"/>
  <atv:overwrite id="button_stroke" transform="matrix(0.4103,0,0,0.75,0,0)" x="365" y="10"/>
  <atv:overwrite id="id_7" transform="matrix(0.4103,0,0,0.75,0,0)" x="365" y="11"/>
  <atv:overwrite id="button_bg" transform="matrix(0.4103,0,0,0.75,0,0)" x="365" y="10"/>
  <atv:overwrite id="combobox_label" transform="matrix(0.4103,0,0,0.75,0,0)" x="355.5" y="24.5"/>
  <atv:overwrite height="32" id="blinking_frame" transform="matrix(0.4103,0,0,0.75,0,0)" width="358"/>
  <atv:overwrite height="32" id="combobox_bg" transform="matrix(0.4103,0,0,0.75,0,0)" width="358"/>
  <atv:overwrite height="38" id="id_1" transform="matrix(0.4103,0,0,0.75,0,0)" width="388"/>
  <atv:overwrite height="40" id="id_0" transform="matrix(0.4103,0,0,0.75,0,0)" width="390"/>
 </svg>
 <script atv:desc="" atv:name="" type="text/ecmascript"><![CDATA[//External Variables
var Global_MaintenanceR=webMI.query["Global_Maintenance"];
var Global_Maintenance_Base_FolderR=webMI.query["Global_Maintenance_Base_Folder"];
var Color=webMI.query["Color"];


//Menu Variables
var Backgrounds=["background_set","background_calendar","background_chart","background_history","background_pdf"];
var Click_Area=["click_area_set","click_area_calendar","click_area_chart","click_area_history","click_area_pdf"];
var Displays=["SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.atvise_Advanced_Objects_Dashboards.Maintenance_Dashboard.Maintenance_set","SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.atvise_Advanced_Objects_Dashboards.Maintenance_Dashboard.Maintenance_calendar","SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.atvise_Advanced_Objects_Dashboards.Maintenance_Dashboard.Maintenance_chart","SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.atvise_Advanced_Objects_Dashboards.Maintenance_Dashboard.Maintenance_history","SYSTEM.LIBRARY.PROJECT.OBJECTDISPLAYS.atvise_Advanced_Objects_Dashboards.Maintenance_Dashboard.Maintenance_pdf"];
var ElementsR;

//----------Initial Conditions----------//
webMI.addOnload(function() {
	   
	 //Call Global_Mant_Monitor to clean up the list  	 
	  webMI.data.call("Global_Mant_Monitor_webMI_Method_Script", {Global_Maintenance:Global_MaintenanceR,Global_Maintenance_Base_Folder:Global_Maintenance_Base_FolderR}, function(e) {
		 
		//Menu Initial Conditions
		setactive(0);		
		
		
		//Update Combobox
		updateCombobox(true);
		
	});
});


//-----------Triggers--------------//
//Monitor Global Maintenance Element

webMI.trigger.connect("com.atvise.combobox_Maintenance_Element", function (e) {
	var ElementsRI;	
	var TextI=e.value.text;
	var Index=Number(e.value.value);

	if (TextI=="All machines"){
		ElementsRI=ElementsR;
	}
	else if (TextI!="All machines"){
		ElementsRI=[ElementsR[Index]];
	}

	webMI.trigger.fire("Global_Object_Current_Addres", {Text:TextI, Elements:ElementsRI});
});


//Maintenance_Set
webMI.addEvent(Click_Area[0], "click", function(e) {

	setactive(0);
	
	
	//Update Combobox
	updateCombobox(true);
	
	
});

//Maintenance_Calendar
webMI.addEvent(Click_Area[1], "click", function(e) {

	setactive(1);	 
	//Update Combobox
	updateCombobox(false);
	
});

//Maintenance_Chart
webMI.addEvent(Click_Area[2], "click", function(e) {
	
	setactive(2);
	//Update Combobox
	updateCombobox(false);
	
		 	
	
});

//Maintenance_Hist
webMI.addEvent(Click_Area[3], "click", function(e) {

	setactive(3);	 
	//Update Combobox
	updateCombobox(false);
	
	
});

//Maintenance_PDF
webMI.addEvent(Click_Area[4], "click", function(e) {

	setactive(4);	
	//Update Combobox
	updateCombobox(false);
		
	
});


//Function to set active window
function setactive(ID){
	
	//Set active only the current icon
	for (var i=0; i<Click_Area.length; i++){
		if (i==ID){
			webMI.gfx.setFill(Backgrounds[i], Color);
		}
		else
		{
			webMI.gfx.setFill(Backgrounds[i], "#000000");
		}
	}
	
	//Open the current window
	webMI.display.openDisplay(Displays[ID], webMI.query, "mainmaintframe");
	
};


//Function to set combobox
function updateCombobox(set){
	setTimeout(function(){
		webMI.trigger.fire("clearItems_Maintenance_Element", 0);
		
		if (set!=true){
			//Add the all maintenance Option
			webMI.trigger.fire("addItem_Maintenance_Element", {value:{value:0, text:"All machines"}});
			
		}
		
		//Read Existing Elements
		webMI.data.read(Global_MaintenanceR, function(e) {
			ElementsR=e.value;
			for (var i in ElementsR) {
				var Mant_ElementsI=ElementsR[i].split('.').pop();
				webMI.trigger.fire("addItemT_Maintenance_Element", {value:{value:i, text:Mant_ElementsI}});
			}
			
			if (set==true){
			   //Set First maintenance
			   webMI.trigger.fire("setSelectedItem_Maintenance_Element", {value:{value:0, text:ElementsR[0].split('.').pop()}});
			   
			  setTimeout(function(){
				webMI.trigger.fire("Global_Object_Current_Addres", {Text:ElementsR[0].split('.').pop(), Elements:[ElementsR[0]]});
			  },200);
			}
			else  {
				//Set All maintenance as default 
				webMI.trigger.fire("setSelectedItem_Maintenance_Element", {value:{value:0, text:"All machines"}});
				
				setTimeout(function(){
					webMI.trigger.fire("Global_Object_Current_Addres", {Text:"All machines", Elements:ElementsR});
				},500);
			}
		});
	},500);
	
}

]]></script>
</svg>
